	<?php
        $_old_body_bg = $this->getConfig("bg_color");
        $_body_background = 'fbfbfb';
        if ( $_COOKIE['body_background_cookie'] ) {
            $_body_background = $_COOKIE['body_background_cookie'];
        }
		
        $_old_link_color = $this->getConfig("link_color");
        $_link_color = 'F36100';
        if ( $_COOKIE['link_color_cookie'] ) {
            $_link_color = $_COOKIE['link_color_cookie'];
        }

    ?>
    <div class="ma-demo-wrap">
		<h2 class="ma-demo-title">Theme Options</h2>
		<div class="ma-demo-option">
			<div class="cl-wrapper">
				<div class="cl-container">
					<div class="cl-table">
						<div class="cl-tr cl-tr-style">
							<div class="cl-td-l cl-td-layout1"><a href="<?php echo $this->getUrl().'?___store=en' ?>" title="Red" ><?php echo $this->__('Red') ?></a></div>
							<div class="cl-td-r cl-td-layout2"><a href="<?php echo $this->getUrl().'?___store=fr' ?>" title="Orange"><?php echo $this->__('Orange') ?></a></div>

						</div>
						<div class="cl-tr cl-tr-style">
							<div class="cl-td-l cl-td-layout4"><a href="<?php echo $this->getUrl().'?___store=ge' ?>" title="Blue"><?php echo $this->__('Blue') ?></a></div>
							<div class="cl-td-r cl-td-layout5"><a href="<?php echo $this->getUrl().'?___store=pt' ?>" title="Green"><?php echo $this->__('Green') ?></a></div>

						</div>
						
						
						
						<div class="cl-tr cl-tr-background">
							<div class="cl-td-l">Background Color:</div>
							<div class="cl-td-r">
								<div class="colorSelector cl-tool" id="bodyBackgroundColor">
									<div style="background-color: #<?php  echo $_body_background ; ?>"></div>
								</div>
							</div>
						</div>
						
						<div class="cl-tr">
							<div class="cl-td-l">Background Image:</div>
							<div class="cl-td-bg">
								<div class="cl-pattern">
										<div id="pattern1" class="cl-image pattern1"></div>
										<div id="pattern2" class="cl-image pattern2"></div>
										<div id="pattern3" class="cl-image pattern3"></div>
										<div id="pattern4" class="cl-image pattern4"></div>
										<div id="pattern5" class="cl-image pattern5"></div>
										<div id="pattern6" class="cl-image pattern6"></div>
										<div id="pattern7" class="cl-image pattern7"></div>
										<div id="pattern8" class="cl-image pattern8"></div>
										<div id="pattern9" class="cl-image pattern9"></div>
										<div id="pattern10" class="cl-image pattern10"></div>
										<div id="pattern11" class="cl-image pattern11"></div>
										<div id="pattern12" class="cl-image pattern12"></div>
										<div id="pattern13" class="cl-image pattern13"></div>
										<div id="pattern14" class="cl-image pattern14"></div>
										<div id="pattern15" class="cl-image pattern15"></div>
										<div id="pattern16" class="cl-image pattern16"></div>
										<div id="pattern17" class="cl-image pattern17"></div>
										<div id="pattern18" class="cl-image pattern18"></div>
										<div id="pattern19" class="cl-image pattern19"></div>
										<div id="pattern20" class="cl-image pattern20"></div>
										<div id="pattern21" class="cl-image pattern21"></div>
										<div id="pattern22" class="cl-image pattern22"></div>
										<div id="pattern23" class="cl-image pattern23"></div>
										<div id="pattern24" class="cl-image pattern24"></div>
										<div id="pattern25" class="cl-image pattern25"></div>
										<div id="pattern26" class="cl-image pattern26"></div>
										<div id="pattern27" class="cl-image pattern27"></div>
										<div id="pattern28" class="cl-image pattern28"></div>
										<div id="pattern29" class="cl-image pattern29"></div>
										<div id="pattern30" class="cl-image pattern30"></div>	
								</div>
							</div>
						</div>
                        <div class="cl-tr cl-row-reset">
                            <span class="cl-reset"></span>
                        </div>
					</div>
                </div>		
			</div>
		</div>
		<div class="control inactive"><a href="javascript:void(0)"></a></div>
		<script type="text/javascript">
			$jq(document).ready( function(){
				$jq('.control').click(function(){
					if($jq(this).hasClass('inactive')) {
						$jq(this).removeClass('inactive');
						$jq(this).addClass('active');
						$jq('.ma-demo-wrap').animate({left:'0'}, 500);
					} else {
						$jq(this).addClass('inactive');
						$jq('.ma-demo-wrap').animate({left:'-224px'}, 500);
					}
				});
			});
		</script>
	</div>
<script type="text/javascript">
//<![CDATA[    
    $jq('#bodyBackgroundColor, #linkColor').each(function() {
        var $jqel = $jq(this);
        /* set time */
        var date = new Date();
        date.setTime(date.getTime() + (1440 * 60 * 1000));
    
        $jqel.ColorPicker({
            color: '#0000ff',
            onChange: function (hsb, hex, rgb) {
    
                $jqel.find('div').css('backgroundColor', '#' + hex);
                switch ($jqel.attr("id")) {			
					
                  case 'bodyBackgroundColor' :
                    $jq("body").css('backgroundColor', '#' + hex);
                    // set cookie
                    $jq.cookie('body_background_cookie', hex , { expires: date });
                    break;
				
                  case 'linkColor' :
                    //$jq("body a").css('color', '#' + hex);
					$jq('<style type="text/css">button.button span, button.btn-checkout span, .header .form-search button.button span, .header .form-search button.button:hover span, .ma-banner7-container .flex-control-paging li a:hover, .ma-banner7-container .flex-control-paging li a.flex-active, .product-view button.btn-cart:hover span, .product-prev:hover, .product-next:hover, .ma-footer-static1 .f-address-icon, .ma-footer-static1 .f-email-icon, .ma-footer-static1 .f-phone-icon, .footer-social li:hover, .wide_menu .container, #back-top, .creare-tweet .icon-tweet, .top-cart-title, .ma-new-vertscroller-wrap .jcarousel-next-vertical:hover, .ma-new-vertscroller-wrap .jcarousel-prev-vertical:hover, .ma-banner7-container .flex-control-paging li a:hover, .ma-banner7-container .flex-control-paging li a.flex-active, .wide_menu .container { background-color:#'+hex+'}</style>').appendTo('head');
					
					$jq('<style type="text/css">.ui-slider .ui-slider-range, .product-view button.btn-cart:hover span { background-color:#'+hex+' !important}</style>').appendTo('head');
					
					$jq('<style type="text/css">a:hover, button.btn-cart:hover span, .breadcrumbs li strong, .pager .pages a:hover, .pager .pages .current, .header .currency-language .language-switcher a:hover, .header .links li a:hover, .block-right-static .block-title strong, .block-subscribe-right .block-title strong, .top-cart-contain .price, .block-account .block-content li a:hover, .block-account .block-content li.current, .block-layered-nav li:hover,  .block-layered-nav li a:hover, .products-grid .product-name a:hover, .products-list .product-name a:hover, .product-view .product-shop .availability span, .regular-price, .regular-price .price, .block .regular-price, .block .regular-price .price, .special-price .price, .add-to-cart .qty, .product-view .product-shop .product-name h1, .product-view .product-shop .product-sku span, .product-view .product-shop .product-brand span, .product-view .product-shop .add-to-links a:hover, .email-friend a:hover, .ma-footer-static li:hover, .ma-footer-static li a:hover, .ma-footer-static-container-bottom .footer-static-content ul li a:hover, .product-view .product-shop .add-to-links a:hover, .email-friend a:hover, .product-tabs a:hover, .product-tabs li.active a, .product-tabs li.active a:hover, .creare-tweet a, .products-grid .actions .add-to-links a:hover, .product-name a:hover, #twitter_update_list a, .wide_menu li.active a, .fish_menu li.active a, .wide_menu li.over a, .fish_menu li.over a, .wide_menu a:hover, .fish_menu a:hover,.wide_menu li.home.active a,.fish_menu li.home.active a, .wide_menu li.home.over a, .fish_menu li.home.over a { color:#'+hex+'}</style>').appendTo('head');
					
					$jq('<style type="text/css">.wide_menu ul li a:hover, .wide_menu ul ul li a:hover, .fish_menu ul li a:hover { color:#'+hex+' !important}</style>').appendTo('head');
					$jq('<style type="text/css">.top-cart-content, .ma-banner7-container, .ma-header-wrapper { border-color:#'+hex+'}</style>').appendTo('head');
						 
                    // set cookie
                    $jq.cookie('link_color_cookie', hex , { expires: date });
                    break;			
				
                }
            }
        });
    });
    /* set time */
    var date = new Date();
    date.setTime(date.getTime() + (1440 * 60 * 1000));
	
	<?php
		// set default background image
		$_old_bd_img = '';
		$_bd_img = '';
		if ( $_COOKIE['body_image_cookie'] ) {
			$_bd_img = $_COOKIE['body_image_cookie'];
		}
	?>
		
	$jq(document).ready(function(){
		
		//load selected font
		$jq("#select-fontselector option").filter(function() {
			//may want to use $.trim in here
			return $jq(this).text() == $jq.cookie('font_cookie'); 
		}).attr('selected', true);
		//change font
		$jq(function(){
			fontSelect=$jq("#select-fontselector");
			fontUpdate=function(){
				curFont=$jq("#select-fontselector").val();
				$jq(".page-title h1, .page-title h2, .block .block-title strong, .block-right-static .block-title h3, .block-subscribe-right .block-title h3, .ma-featured-product-title h2, .products-grid .product-name, .products-list .product-name, .price-box .price, .product-view .product-shop .product-name h1, .product-view .box-up-sell h2, .ma-footer-static1 .footer-static-title h3, .product-view button.btn-cart span span, .ma-footer-static-container-bottom .footer-static-title h3, .product-tabs a, .wide_menu a, .fish_menu a, .wide_menu ul li a").css({ fontFamily: curFont });
				$jq("<link />",{href:"http://fonts.googleapis.com/css?family="+curFont,rel:"stylesheet",type:"text/css"}).appendTo("head");
			}
			fontSelect.change(function(){
				fontUpdate();
			}).keyup(function(){
				fontUpdate();
			}).keydown(function(){
				fontUpdate();
			});
			
			$jq("#select-fontselector").trigger("change");
		})
		
		$jq('#select-fontselector').change(function() {
			$jq.cookie('font_cookie', $jq(this).val(), { expires: date });
		});
		$jq(".page-title h1, .page-title h2, .block .block-title strong, .block-right-static .block-title h3, .block-subscribe-right .block-title h3, .ma-featured-product-title h2, .products-grid .product-name, .products-list .product-name, .price-box .price, .product-view .product-shop .product-name h1, .product-view .box-up-sell h2, .ma-footer-static1 .footer-static-title h3, .product-view button.btn-cart span span, .ma-footer-static-container-bottom .footer-static-title h3, .product-tabs a, .wide_menu a, .fish_menu a, .wide_menu ul li a").css({ fontFamily: $jq.cookie('font_cookie') }); 
		$jq("<link />",{href:"http://fonts.googleapis.com/css?family="+$jq.cookie('font_cookie'),rel:"stylesheet",type:"text/css"}).appendTo("head");
		
		//set cookie
		$jq("body").css('backgroundColor', '#<?php echo $_body_background ?>');
		$jq("body").css('background-image', $jq.cookie('body_image_cookie'));
		$jq("body").css('background-repeat','repeat');
		
		//link color
		$jq('<style type="text/css">button.button span, button.btn-checkout span, .header .form-search button.button span, .header .form-search button.button:hover span, .ma-banner7-container .flex-control-paging li a:hover, .ma-banner7-container .flex-control-paging li a.flex-active, .product-view button.btn-cart:hover span, .product-prev:hover, .product-next:hover, .ma-footer-static1 .f-address-icon, .ma-footer-static1 .f-email-icon, .ma-footer-static1 .f-phone-icon, .footer-social li:hover, .wide_menu .container, #back-top, .creare-tweet .icon-tweet, .top-cart-title, .ma-new-vertscroller-wrap .jcarousel-next-vertical:hover, .ma-new-vertscroller-wrap .jcarousel-prev-vertical:hover, .ma-banner7-container .flex-control-paging li a:hover, .ma-banner7-container .flex-control-paging li a.flex-active, .wide_menu .container { background-color:#'+$jq.cookie('link_color_cookie')+'}</style>').appendTo('head');
		$jq('<style type="text/css">.ui-slider .ui-slider-range, .product-view button.btn-cart:hover span { background-color:#'+$jq.cookie('link_color_cookie')+' !important}</style>').appendTo('head');
		
		$jq('<style type="text/css">a:hover, button.btn-cart:hover span, .breadcrumbs li strong, .pager .pages a:hover, .pager .pages .current, .header .currency-language .language-switcher a:hover, .header .links li a:hover, .block-right-static .block-title strong, .block-subscribe-right .block-title strong, .top-cart-contain .price, .block-account .block-content li a:hover, .block-account .block-content li.current, .block-layered-nav li:hover,  .block-layered-nav li a:hover, .products-grid .product-name a:hover, .products-list .product-name a:hover, .product-view .product-shop .availability span, .regular-price, .regular-price .price, .block .regular-price, .block .regular-price .price, .special-price .price, .add-to-cart .qty, .product-view .product-shop .product-name h1, .product-view .product-shop .product-sku span, .product-view .product-shop .product-brand span, .product-view .product-shop .add-to-links a:hover, .email-friend a:hover, .ma-footer-static li:hover, .ma-footer-static li a:hover, .ma-footer-static-container-bottom .footer-static-content ul li a:hover, .product-view .product-shop .add-to-links a:hover, .email-friend a:hover, .product-tabs a:hover, .product-tabs li.active a, .product-tabs li.active a:hover, .creare-tweet a, .products-grid .actions .add-to-links a:hover, .product-name a:hover, #twitter_update_list a, .wide_menu li.active a, .fish_menu li.active a, .wide_menu li.over a, .fish_menu li.over a, .wide_menu a:hover, .fish_menu a:hover,.wide_menu li.home.active a,.fish_menu li.home.active a, .wide_menu li.home.over a, .fish_menu li.home.over a { color:#'+$jq.cookie('link_color_cookie')+'}</style>').appendTo('head');
		
		$jq('<style type="text/css">.wide_menu ul li a:hover, .wide_menu ul ul li a:hover, .fish_menu ul li a:hover { color:#'+$jq.cookie('link_color_cookie')+' !important}</style>').appendTo('head');
		
		$jq('<style type="text/css">.top-cart-content, .ma-banner7-container, .ma-header-wrapper { border-color:#'+$jq.cookie('link_color_cookie')+'}</style>').appendTo('head');
		
		//set background image
		$jq('.cl-pattern div').click(function(){
			$jq("body").css('background-image', 'url(<?php echo $this->getSkinUrl('magentothem/colortool/images/pattern/'); ?>'+this.id+'.png)');
			$jq("body").css('background-repeat','repeat');
			$jq.cookie('body_image_cookie', 'url(<?php echo $this->getSkinUrl('magentothem/colortool/images/pattern/'); ?>'+this.id+'.png)', { expires: date });
		});
	
		//set cookie for theme color
		var cl = $jq(".cl-row-themeskin");
		cl.find("a").each(function() {
			$jq(this).click(function(){
				$jq.cookie('style_color', $jq(this).attr('title') , { expires: date });
				location.reload();
			});
		});
	});
		
	
    //reset button
    $jq('.cl-reset').click(function(){
		
		$jq.cookie('font_cookie',''); 
		$jq.cookie('link_color_cookie','');
		
        $jq.cookie('body_image_cookie','');	
		$jq("body").css('background-image', 'url(<?php echo $this->getSkinUrl('magentothem/colortool/images/pattern/').$_old_bd_img; ?>)');
		
        $jq.cookie('body_background_cookie','');
        $jq("body").css('backgroundColor', '#<?php echo $_old_body_bg ?>');
		location.reload();
    });
//]]>
</script>